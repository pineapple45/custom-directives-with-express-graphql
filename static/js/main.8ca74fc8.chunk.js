(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{168:function(e,t,r){},169:function(e,t,r){},170:function(e,t,r){"use strict";r.r(t);var n,a=r(22),s=r.n(a),c=r(120),i=r(0),o=r.n(i),d=r(31),u=r(25),l=r(236),j=r(8),p=r.n(j),b=r(13),m=r(11),h=r(243),x=r(223),O=r(224),g=r(237),f=r(218),v=r(85),y=r(225),w=r(226),I=r(227),k=r(228),C=r(229),S=r(206),_=r(208),L=r(210),D=r(211),T=r(1),P=Object(S.a)((function(e){return{card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}})),M=function(e){var t=e.cardHeading,r=e.cardBody,n=e.media,a=e.children,s=P();return Object(T.jsxs)(_.a,{className:s.card,children:[n&&Object(T.jsx)(L.a,{className:s.cardMedia,image:null===n||void 0===n?void 0:n.image,title:null===n||void 0===n?void 0:n.alt}),Object(T.jsxs)(D.a,{className:s.cardContent,children:[Object(T.jsx)(v.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t}),Object(T.jsx)(v.a,{children:r})]}),a]})},H=r(12),B=r(246),$=r(242),N=function(e){return Object(T.jsx)($.a,Object(H.a)({elevation:6,variant:"filled"},e))},A=Object(S.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),E=function(e){var t=e.message,r=e.setMessage,n=A(),a=function(e,n){"clickaway"!==n&&r(Object(H.a)(Object(H.a)({},t),{},{toShow:!1}))};return Object(T.jsx)("div",{className:n.root,children:Object(T.jsx)(B.a,{open:t.toShow,autoHideDuration:6e3,onClose:a,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(T.jsx)(N,{onClose:a,severity:t.variant,children:t.messageText})})})},q=r(247),R=r(213),U=r(214),W=r(212),G=r(130),Q=r(216),F=r(217),J=r(215),z={userId:void 0,token:void 0,tokenExpiration:void 0,username:void 0,role:void 0},K=o.a.createContext(z),V=function(e){var t=e.children,r=Object(i.useState)(z),n=Object(m.a)(r,2),a=n[0],s=n[1];return Object(i.useEffect)((function(){var e="undefined"!==localStorage.getItem("userData")&&JSON.parse(localStorage.getItem("userData"));e&&void 0===a.userId&&s(Object(H.a)(Object(H.a)({},a),e))}),[a,s]),Object(T.jsx)(K.Provider,{value:{authState:a,setAuthState:s,logout:function(){localStorage.clear(),s(z)},isLoggedIn:function(){return void 0!==a.userId&&a}},children:t})},Y=function(){return Object(i.useContext)(K)},X=r(131),Z=["component","role"];!function(e){e.ADMIN="ADMIN",e.MODERATOR="MODERATOR",e.AUTH_USER="AUTH_USER"}(n||(n={}));var ee,te,re,ne,ae,se,ce,ie,oe,de,ue,le,je,pe,be=function(e){var t,r=e.component,n=e.role,a=Object(X.a)(e,Z),s=Y(),c=s.authState,i=s.isLoggedIn;return t=i()?c:JSON.parse(localStorage.getItem("userData")),Object(T.jsx)(u.b,Object(H.a)(Object(H.a)({},a),{},{render:function(e){return t?t.role===n?(console.log("route is authorised"),Object(T.jsx)(r,Object(H.a)({},e))):(console.log("route not authorised"),Object(T.jsx)(u.a,{to:{pathname:"/"}})):(console.log("route not authenticated"),Object(T.jsx)(u.a,{to:{pathname:"/login",state:{from:e.location}}}))}}))},me=r.p+"static/media/icon.5fd26610.svg",he=Object(S.a)((function(e){return Object(q.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})})),xe=function(){var e=Y(),t=e.isLoggedIn,r=e.logout,a=e.authState,s=Object(u.g)(),c=he(),i=o.a.useState(null),d=Object(m.a)(i,2),l=d[0],j=d[1],p=Boolean(l);return Object(T.jsx)(R.a,{position:"static",color:"transparent",children:Object(T.jsxs)(U.a,{children:[Object(T.jsx)("img",{src:me,alt:"site-icon",width:"50px"}),Object(T.jsx)(v.a,{variant:"h6",className:c.title,onClick:function(){return s.push("/")},children:"Photos"}),!1!==t()?Object(T.jsxs)("div",{children:[Object(T.jsxs)(g.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[a&&Object(T.jsx)("span",{children:a.username}),Object(T.jsx)(W.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){j(e.currentTarget)},color:"inherit",children:Object(T.jsx)(J.a,{})})]}),Object(T.jsxs)(G.a,{id:"menu-appbar",anchorEl:l,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:p,onClose:function(){j(null)},children:[a&&a.role===n.ADMIN&&Object(T.jsx)(Q.a,{onClick:function(){return s.push("/admin")},children:"Admin Console"}),a&&a.role===n.MODERATOR&&Object(T.jsx)(Q.a,{onClick:function(){return s.push("/moderator")},children:"Moderator Console"}),Object(T.jsx)(Q.a,{onClick:function(){r(),j(null)},children:"Logout"})]})]}):Object(T.jsxs)("div",{children:[Object(T.jsx)(F.a,{color:"inherit",variant:"outlined",style:{marginRight:"10px"},onClick:function(){return s.push("/register")},children:"register"}),Object(T.jsx)(F.a,{variant:"contained",color:"secondary",onClick:function(){return s.push("/login")},children:"login"})]})]})})},Oe=r(219),ge=Object(S.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{marginTop:e.spacing(8),marginBottom:e.spacing(2)},footer:{padding:e.spacing(3,2),marginTop:"auto",backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[800]}}})),fe=function(){var e=ge();return Object(T.jsx)("div",{className:e.root,children:Object(T.jsx)("footer",{className:e.footer,children:Object(T.jsx)(f.a,{maxWidth:"sm",children:Object(T.jsxs)(v.a,{variant:"body2",color:"textSecondary",align:"center",children:[Object(T.jsx)(Oe.a,{color:"inherit",href:"https://material-ui.com/",children:"Photos"})," ",(new Date).getFullYear(),"."]})})})})},ve=function(e){var t=e.children;return Object(T.jsxs)("div",{children:[Object(T.jsx)(xe,{}),Object(T.jsx)("br",{}),t,Object(T.jsx)(fe,{})]})},ye=function(e){var t=e.messageText,r=e.variant,n=e.toShow,a=Object(i.useState)({toShow:n,variant:r,messageText:t}),s=Object(m.a)(a,2);return[s[0],s[1]]},we=r(33),Ie=r(240),ke=Object(Ie.a)(ee||(ee=Object(we.a)(["\n  query Login($usernameOrEmail: String!, $password: String!) {\n    login(usernameOrEmail: $usernameOrEmail, password: $password) {\n      userId\n      token\n      tokenExpiration\n      username\n      role\n    }\n  }\n"]))),Ce=Object(Ie.a)(te||(te=Object(we.a)(["\n  query {\n    listPosts {\n      _id\n      image\n      title\n      description\n      creator {\n        _id\n        username\n      }\n      commentList {\n        _id\n        post {\n          _id\n        }\n        creator {\n          _id\n        }\n      }\n      likeList {\n        _id\n        post {\n          _id\n        }\n        creator {\n          _id\n        }\n      }\n    }\n  }\n"]))),Se=Object(Ie.a)(re||(re=Object(we.a)(["\n  query GetPostById($_id: ID!) {\n    getPostById(_id: $_id) {\n      _id\n      image\n      title\n      description\n      creator {\n        username\n      }\n      commentList {\n        _id\n        text\n        creator {\n          username\n        }\n      }\n    }\n  }\n"]))),_e=Object(Ie.a)(ne||(ne=Object(we.a)(["\n  query {\n    listUsers {\n      _id\n      username\n      email\n      role\n    }\n  }\n"]))),Le=(Object(Ie.a)(ae||(ae=Object(we.a)(["\n  query GetUserById($_id: ID!) {\n    getUserById(_id: _id) {\n      _id\n      username\n      email\n      role\n      postList {\n        _id\n        title\n      }\n      commentList {\n        _id\n        text\n      }\n    }\n  }\n"]))),Object(S.a)((function(e){return{icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)}}}))),De=Object(Ie.a)(se||(se=Object(we.a)(["\n  mutation CreateUser($username: String!, $email: String!, $password: String!) {\n    createUser(\n      user: { username: $username, email: $email, password: $password }\n    ) {\n      _id\n      username\n      email\n      role\n    }\n  }\n"]))),Te=Object(Ie.a)(ce||(ce=Object(we.a)(["\n  mutation CreatePost(\n    $image: String\n    $title: String!\n    $description: String\n    $creatorId: ID!\n  ) {\n    createPost(\n      post: {\n        image: $image\n        title: $title\n        description: $description\n        creatorId: $creatorId\n      }\n    ) {\n      _id\n      image\n      title\n      description\n      creator {\n        _id\n        username\n        email\n        role\n      }\n    }\n  }\n"]))),Pe=Object(Ie.a)(ie||(ie=Object(we.a)(["\n  mutation DeletePost($_id: ID!) {\n    deletePost(_id: $_id)\n  }\n"]))),Me=Object(Ie.a)(oe||(oe=Object(we.a)(["\n  mutation AssignRole($role: String!, $assignedBy: ID!, $assignedUser: ID!) {\n    assignRole(\n      role: $role\n      assignedBy: $assignedBy\n      assignedUser: $assignedUser\n    ) {\n      _id\n      username\n      email\n      role\n    }\n  }\n"]))),He=Object(Ie.a)(de||(de=Object(we.a)(["\n  mutation CreateLike($postId: ID!, $creatorId: ID!) {\n    createLike(like: { postId: $postId, creatorId: $creatorId }) {\n      _id\n      post {\n        _id\n      }\n      creator {\n        _id\n      }\n    }\n  }\n"]))),Be=Object(Ie.a)(ue||(ue=Object(we.a)(["\n  mutation DeleteLike($_id: ID!) {\n    deleteLike(_id: $_id)\n  }\n"]))),$e=Object(Ie.a)(le||(le=Object(we.a)(["\n  mutation CreateComment($text: String!, $postId: ID!, $creatorId: ID!) {\n    createComment(\n      comment: { text: $text, postId: $postId, creatorId: $creatorId }\n    ) {\n      _id\n      text\n      post {\n        _id\n      }\n      creator {\n        _id\n      }\n    }\n  }\n"]))),Ne=Object(Ie.a)(je||(je=Object(we.a)(["\n  mutation DeleteComment($_id: ID!) {\n    deleteComment(_id: $_id)\n  }\n"]))),Ae=Object(Ie.a)(pe||(pe=Object(we.a)(["\n  mutation DeletUser($_id: ID!) {\n    deleteUser(_id: $_id)\n  }\n"]))),Ee=r(248),qe=function(){var e=Y().isLoggedIn,t=Object(Ee.a)(He),r=Object(m.a)(t,2),n=r[0],a=r[1],s=a.data,c=a.loading,i=a.error;return{createLikeMutationHandler:function(){var t=Object(b.a)(p.a.mark((function t(r,a){var s,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e()){t.next=2;break}return t.abrupt("return",{error:!0,data:{message:"Please Login to interact with posts"}});case 2:return t.prev=2,t.next=5,n({variables:Object(H.a)({},r),refetchQueries:[{query:Se,variables:{_id:a.postId}}]});case 5:return s=t.sent,c=s.data,t.abrupt("return",{error:!1,data:c});case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",{error:!0,data:t.t0});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,r){return t.apply(this,arguments)}}(),data:s,isLoading:c,error:i}},Re=function(){var e=Y().isLoggedIn,t=Object(Ee.a)(Be),r=Object(m.a)(t,2),n=r[0],a=r[1],s=a.data,c=a.loading,i=a.error;return{deleteLikeMutationHandler:function(){var t=Object(b.a)(p.a.mark((function t(r,a){var s,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e()){t.next=2;break}return t.abrupt("return",{error:!0,data:{message:"Please Login to interact with posts"}});case 2:return t.prev=2,t.next=5,n({variables:Object(H.a)({},r),refetchQueries:[{query:Se,variables:{_id:a.postId}}]});case 5:return s=t.sent,c=s.data,t.abrupt("return",{error:!1,data:c});case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",{error:!0,data:t.t0});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,r){return t.apply(this,arguments)}}(),data:s,isLoading:c,error:i}},Ue=Le,We=function(){var e=qe().createLikeMutationHandler,t=Re().deleteLikeMutationHandler,r=Object(h.a)(Ce,{fetchPolicy:"network-only",errorPolicy:"all"}),n=r.loading,a=r.error,s=r.data,c=Y().authState,i=ye({toShow:!1,messageText:"",variant:"success"}),o=Object(m.a)(i,2),d=o[0],l=o[1],j=Ue(),S=Object(u.g)(),_=function(){var t=Object(b.a)(p.a.mark((function t(r){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({postId:r,creatorId:c.userId},{postId:r});case 2:n=t.sent,l({messageText:n.error&&n.data.message,toShow:n.error&&!0,variant:"error"});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(p.a.mark((function e(r,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({_id:r},{postId:n});case 2:a=e.sent,l({messageText:a.error&&a.data.message,toShow:a.error&&!0,variant:"error"});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();if(n)return Object(T.jsx)(x.a,{});var D=void 0;(null===a||void 0===a?void 0:a.networkError)||(D=null===a||void 0===a?void 0:a.message);var P=function(e){return e.likeList&&e.likeList.find((function(t){return c.userId&&t.post._id===e._id&&t.creator._id===c.userId?t:null}))};return Object(T.jsxs)(ve,{children:[Object(T.jsx)(O.a,{}),D&&Object(T.jsx)(g.a,{display:"flex",justifyContent:"center",alignItems:"center",children:D}),Object(T.jsxs)("main",{children:[Object(T.jsx)("div",{className:j.heroContent,children:Object(T.jsxs)(f.a,{maxWidth:"sm",children:[Object(T.jsx)(v.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0,children:Object(T.jsxs)(g.a,{display:"flex",justifyContent:"center",alignItems:"center",children:[Object(T.jsx)("img",{src:me,alt:"site-icon",width:"100px"}),Object(T.jsx)("span",{children:"Photos"})]})}),Object(T.jsxs)(v.a,{variant:"h5",align:"center",paragraph:!0,children:["Hello\ud83d\udc4b! Photos is sample test project that I worked upon to show how custom-directives can be implemented with"," ",Object(T.jsx)("a",{href:"https://www.npmjs.com/package/express-graphql",children:"express-graphql"})," ","and"," ",Object(T.jsx)("a",{href:"https://www.npmjs.com/package/graphql-directive",children:"graphql-directive"})]})]})}),Object(T.jsx)(f.a,{className:j.cardGrid,maxWidth:"md",children:Object(T.jsx)(y.a,{container:!0,spacing:4,children:void 0!==s?s.listPosts.map((function(e){var t={image:e.image,alt:e.image};return Object(T.jsx)(y.a,{item:!0,xs:12,sm:6,md:4,children:Object(T.jsx)(M,{media:t,cardHeading:e.title,cardBody:e.description,children:Object(T.jsxs)(w.a,{children:[Object(T.jsxs)(g.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[P(e)?Object(T.jsx)(I.a,{color:"secondary",onClick:function(){return L(P(e)._id,e._id)}},P(e)._id):Object(T.jsx)(k.a,{color:"secondary",onClick:function(){return _(e._id)}}),e.likeList?0!==e.likeList.length&&Object(T.jsx)("span",{children:e.likeList.length}):Object(T.jsx)("span",{children:"could not fetch likes count"})]}),Object(T.jsxs)(g.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[Object(T.jsx)(C.a,{onClick:function(){return t=e._id,void S.push("/post/".concat(t));var t}}),e.commentList?0!==e.commentList.length&&Object(T.jsx)("span",{children:e.commentList.length}):Object(T.jsx)("span",{children:"could not fetch comments count"})]})]})})},e._id)})):Object(T.jsx)("div",{children:"Could not fetch posts"})})})]}),Object(T.jsx)(E,{message:d,setMessage:l})]})},Ge=function(){return Object(T.jsxs)(g.a,{display:"flex",justifyContent:"center",alignItems:"center",children:["404",Object(T.jsx)("br",{}),"Page Not Found :(",Object(T.jsx)("br",{}),Object(T.jsx)(d.b,{to:"/",children:"Go to home"})]})},Qe=r(57),Fe=r(250),Je=r(251),ze=r(98),Ke=r.n(ze),Ve=r(129),Ye=r(238),Xe=r(239),Ze=r(128),et=null,tt=Object({NODE_ENV:"production",PUBLIC_URL:"/custom-directives-with-express-graphql",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).browser;function rt(e){var t="undefined"!==localStorage.getItem("userData")&&JSON.parse(localStorage.getItem("userData"))&&JSON.parse(localStorage.getItem("userData")).token,r="https://photos-custom-directives.herokuapp.com/graphql";console.log("backend_uri",r);var n=Object(Ve.a)({uri:r,headers:{"Content-Type":"application/json",Authorization:t?"Bearer ".concat(t):""}}),a=Object(Ze.a)((function(e){e.graphQLErrors;var t=e.networkError;t&&(tt&&"failed to fetch"===t.message?alert("Please check your internet connection or retry agan!"):void 0!==typeof window&&"Response not successful: Received status code 400"===t.message&&alert("Server received bad request. Please check your client queries"),console.log("[Network error]: ".concat(t)))}));return new Ye.a({connectToDevTools:tt,ssrMode:!tt,link:a.concat(n),cache:(new Xe.a).restore(e||{})})}function nt(e){return tt?(et||(et=rt(e)),et):rt(e)}var at=nt({}),st=function(){return{loginUserQueryHandler:function(){var e=Object(b.a)(p.a.mark((function e(t,r){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at.query({query:ke,variables:t});case 3:return n=e.sent,a=n.data,e.abrupt("return",{error:!1,data:a});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:!0,data:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()}},ct=Object(S.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),it=function(){var e=ct(),t=Object(u.g)(),r=Y(),n=r.authState,a=r.setAuthState,s=r.isLoggedIn,c=st().loginUserQueryHandler,o=Object(i.useState)({toShow:!1,variant:"success",messageText:""}),l=Object(m.a)(o,2),j=l[0],h=l[1],g=Object(i.useState)({usernameOrEmail:"",password:""}),w=Object(m.a)(g,2),I=w[0],k=w[1],C=Object(i.useState)(!1),S=Object(m.a)(C,2),_=S[0],L=S[1],D=function(e){k(Object(H.a)(Object(H.a)({},I),{},Object(Qe.a)({},e.target.name,e.target.value)))},P=function(){var e=Object(b.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),L(!0),e.next=4,c(Object(H.a)({},I));case 4:if(r=e.sent,h({messageText:r.error?r.data.message:"login succesful",toShow:!0,variant:r.error?"error":"success"}),L(!1),!r.error){e.next=9;break}return e.abrupt("return");case 9:a(Object(H.a)(Object(H.a)({},n),r.data.login)),localStorage.setItem("userData",JSON.stringify(r.data.login)),k({usernameOrEmail:"",password:""});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){s()&&t.push("/")}),[t,s]),Object(i.useEffect)((function(){s()&&t.push("/")}),[s,t]),Object(T.jsxs)(f.a,{component:"main",maxWidth:"xs",children:[Object(T.jsx)(O.a,{}),Object(T.jsxs)("div",{className:e.paper,children:[Object(T.jsx)(Fe.a,{className:e.avatar,children:Object(T.jsx)(Ke.a,{})}),Object(T.jsx)(v.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(T.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:P,children:[Object(T.jsx)(Je.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Enter Username or Email",name:"usernameOrEmail",autoComplete:"text",autoFocus:!0,onChange:D}),Object(T.jsx)(Je.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:D}),Object(T.jsx)(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign In"}),_&&Object(T.jsx)(x.a,{}),Object(T.jsx)(y.a,{container:!0,children:Object(T.jsx)(y.a,{item:!0,children:Object(T.jsx)(d.b,{to:"/register",children:"Don't have an account? Sign Up"})})})]}),Object(T.jsx)("br",{})]}),Object(T.jsx)(E,{message:j,setMessage:h})]})},ot=function(){var e=Object(Ee.a)(De),t=Object(m.a)(e,2),r=t[0],n=t[1],a=n.data,s=n.loading,c=n.error;return{createUserMutationHandler:function(){var e=Object(b.a)(p.a.mark((function e(t,n){var a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r({variables:Object(H.a)({},t)});case 3:return a=e.sent,s=a.data,e.abrupt("return",{error:!1,data:s});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:!0,data:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}(),isLoading:s,data:a,error:c}},dt=Object(S.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),ut=function(){var e=dt(),t=Object(u.g)(),r=Y().isLoggedIn,n=ot(),a=n.createUserMutationHandler,s=n.isLoading,c=Object(i.useState)({toShow:!1,variant:"success",messageText:""}),o=Object(m.a)(c,2),l=o[0],j=o[1],h=Object(i.useState)({username:"",email:"",password:""}),g=Object(m.a)(h,2),w=g[0],I=g[1],k=function(e){I(Object(H.a)(Object(H.a)({},w),{},Object(Qe.a)({},e.target.name,e.target.value)))},C=function(){var e=Object(b.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a(Object(H.a)({},w));case 3:r=e.sent,j({messageText:r.error?r.data.message:"registered successfully",toShow:!0,variant:r.error?"error":"success"}),I({username:"",email:"",password:""});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r()&&t.push("/")}),[r,t]),Object(T.jsxs)(f.a,{component:"main",maxWidth:"xs",children:[Object(T.jsx)(O.a,{}),Object(T.jsxs)("div",{className:e.paper,children:[Object(T.jsx)(Fe.a,{className:e.avatar,children:Object(T.jsx)(Ke.a,{})}),Object(T.jsx)(v.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(T.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:C,children:[Object(T.jsxs)(y.a,{container:!0,spacing:2,children:[Object(T.jsx)(y.a,{item:!0,xs:12,children:Object(T.jsx)(Je.a,{variant:"outlined",required:!0,fullWidth:!0,name:"username",label:"Username",type:"text",id:"username",onChange:k})}),Object(T.jsx)(y.a,{item:!0,xs:12,children:Object(T.jsx)(Je.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",type:"email",autoComplete:"email",onChange:k})}),Object(T.jsx)(y.a,{item:!0,xs:12,children:Object(T.jsx)(Je.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:k})})]}),Object(T.jsx)(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign Up"}),s&&Object(T.jsx)(x.a,{}),Object(T.jsx)(y.a,{container:!0,justifyContent:"flex-end",children:Object(T.jsx)(y.a,{item:!0,children:Object(T.jsx)(d.b,{to:"/login",children:"Already have an account? Sign in"})})})]}),Object(T.jsx)("br",{})]}),Object(T.jsx)(E,{message:l,setMessage:j})]})},lt=r(133),jt=r(233),pt=function(){var e=Y().isLoggedIn,t=Object(Ee.a)($e),r=Object(m.a)(t,2),n=r[0],a=r[1],s=a.data,c=a.loading,i=a.error;return{createCommentMutationHandler:function(){var t=Object(b.a)(p.a.mark((function t(r,a){var s,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e()){t.next=2;break}return t.abrupt("return",{error:!0,data:{message:"Please Login to create comments"}});case 2:return t.prev=2,t.next=5,n({variables:Object(H.a)({},r),refetchQueries:[{query:Se,variables:{_id:a.postId}}]});case 5:return s=t.sent,c=s.data,t.abrupt("return",{error:!1,data:c});case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",{error:!0,data:t.t0});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,r){return t.apply(this,arguments)}}(),data:s,isLoading:c,error:i}},bt=function(){var e=Y().authState,t=Object(u.h)().id,r=Object(h.a)(Se,{variables:{_id:t}}),n=r.loading,a=r.data,s=pt(),c=s.createCommentMutationHandler,o=s.isLoading,d=Object(i.useState)(""),l=Object(m.a)(d,2),j=l[0],O=l[1],g=ye({messageText:"",toShow:!1,variant:"success"}),f=Object(m.a)(g,2),v=f[0],w=f[1],I=function(){var r=Object(b.a)(p.a.mark((function r(){var n;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c({text:j,creatorId:e.userId,postId:t},{postId:t});case 2:n=r.sent,w({messageText:n.error?n.data.message:"comment added",toShow:!0,variant:n.error?"error":"success"});case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return Object(T.jsxs)(ve,{children:[n?Object(T.jsx)(x.a,{}):Object(T.jsxs)(y.a,{container:!0,spacing:2,justifyContent:"center",children:[Object(T.jsx)(y.a,{item:!0,xs:11,children:Object(T.jsx)(M,{cardHeading:a.getPostById.title,cardBody:a.getPostById.description})}),Object(T.jsxs)(y.a,{item:!0,xs:11,children:[Object(T.jsx)(Je.a,{id:"outlined-full-width",label:"Add Comment",placeholder:"Add comment",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined",onChange:function(e){return O(e.target.value)}}),Object(T.jsx)(F.a,{onClick:I,variant:"contained",color:"secondary",children:"ADD"}),o&&Object(T.jsx)(x.a,{})]}),Object(T.jsx)(y.a,{item:!0,xs:11,children:"Comments"}),a.getPostById.commentList&&0!==a.getPostById.commentList.length&&Object(T.jsx)(y.a,{item:!0,xs:11,children:a.getPostById.commentList.map((function(e){return Object(T.jsx)(lt.a,{style:{padding:"10px",margin:"5px"},children:Object(T.jsx)(jt.a,{primary:e.creator.username,secondary:e.text})},e._id)}))})]}),Object(T.jsx)(E,{message:v,setMessage:w})]})},mt=r(234),ht=r(241),xt=Object(S.a)((function(e){return Object(q.a)({paper:{position:"absolute",width:"50%",minWidth:"400px",backgroundColor:e.palette.background.paper,border:"1px solid #000",borderRadius:"5px",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}})})),Ot=function(e){var t=e.handleClose,r=e.open,n=e.children,a=xt();return Object(T.jsx)("div",{children:Object(T.jsx)(ht.a,{open:r,onClose:t,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(T.jsx)("div",{className:a.paper,children:n})})})},gt=function(){var e=Y().isLoggedIn,t=Object(Ee.a)(Te),r=Object(m.a)(t,2),n=r[0],a=r[1],s=a.data,c=a.loading,i=a.error;return{createPostMutationHandler:function(){var t=Object(b.a)(p.a.mark((function t(r,a){var s,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e()){t.next=2;break}return t.abrupt("return",{error:!0,data:{message:"Please Login to create posts"}});case 2:return t.prev=2,t.next=5,n({variables:Object(H.a)({},r),refetchQueries:[{query:Ce}]});case 5:return s=t.sent,c=s.data,t.abrupt("return",{error:!1,data:c});case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",{error:!0,data:t.t0});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,r){return t.apply(this,arguments)}}(),data:s,isLoading:c,error:i}},ft=function(){var e=Y().isLoggedIn,t=Object(Ee.a)(Pe),r=Object(m.a)(t,2),n=r[0],a=r[1],s=a.data,c=a.loading,i=a.error;return{deletePostMutationHandler:function(){var t=Object(b.a)(p.a.mark((function t(r,a){var s,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e()){t.next=2;break}return t.abrupt("return",{error:!0,data:{message:"Please Login to delete posts"}});case 2:return t.prev=2,t.next=5,n({variables:Object(H.a)({},r),refetchQueries:[{query:Ce}]});case 5:return s=t.sent,c=s.data,t.abrupt("return",{error:!1,data:c});case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",{error:!0,data:t.t0});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,r){return t.apply(this,arguments)}}(),data:s,isLoading:c,error:i}},vt=Le,yt=function(){var e=Y().authState,t=Object(h.a)(Ce),r=t.loading,n=t.data,a=gt().createPostMutationHandler,s=ft().deletePostMutationHandler,c=qe().createLikeMutationHandler,o=Re().deleteLikeMutationHandler,d=Object(i.useState)(!1),l=Object(m.a)(d,2),j=l[0],S=l[1],_=Object(i.useState)({title:"",description:"",image:""}),L=Object(m.a)(_,2),D=L[0],P=L[1],B=ye({messageText:"",toShow:!1,variant:"success"}),$=Object(m.a)(B,2),N=$[0],A=$[1],q=vt(),R=Object(u.g)(),U=function(e){P(Object(H.a)(Object(H.a)({},D),{},Object(Qe.a)({},e.target.name,e.target.value)))},W=function(){var t=Object(b.a)(p.a.mark((function t(){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(Object(H.a)(Object(H.a)({},D),{},{creatorId:e.userId}));case 2:r=t.sent,A({messageText:r.error?r.data.message:"post added",toShow:!0,variant:r.error?"error":"success"}),P({title:"",description:"",image:""}),S(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),G=function(){var e=Object(b.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({_id:t});case 2:r=e.sent,A({messageText:r.error?r.data.message:"post deleted",toShow:!0,variant:r.error?"error":"success"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var t=Object(b.a)(p.a.mark((function t(r){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c({postId:r,creatorId:e.userId},{postId:r});case 2:n=t.sent,A({messageText:n.error&&n.data.message,toShow:n.error&&!0,variant:"error"});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=function(){var e=Object(b.a)(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({_id:t},{postId:r});case 2:n=e.sent,A({messageText:n.error&&n.data.message,toShow:n.error&&!0,variant:"error"});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),z=function(t){return t.likeList&&t.likeList.find((function(r){return e.userId&&r.post._id===t._id&&r.creator._id===e.userId?r:null}))};return Object(T.jsxs)(ve,{children:[Object(T.jsx)(O.a,{}),Object(T.jsxs)("main",{children:[Object(T.jsx)("div",{className:q.heroContent,children:Object(T.jsxs)(f.a,{maxWidth:"sm",children:[Object(T.jsx)(v.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0,children:Object(T.jsxs)(g.a,{display:"flex",justifyContent:"center",alignItems:"center",children:[Object(T.jsx)("img",{src:me,alt:"site-icon",width:"100px"}),Object(T.jsx)("span",{children:"Photos Admin"})]})}),Object(T.jsxs)(v.a,{variant:"h5",align:"center",paragraph:!0,children:["Hello\ud83d\udc4b! Photos is sample test project that I worked upon to show how custom-directives can be implemented with"," ",Object(T.jsx)("a",{href:"https://www.npmjs.com/package/express-graphql",children:"express-graphql"})," ","and"," ",Object(T.jsx)("a",{href:"https://www.npmjs.com/package/graphql-directive",children:"graphql-directive"})]}),Object(T.jsxs)("div",{className:q.heroButtons,children:[Object(T.jsxs)(y.a,{container:!0,spacing:2,justifyContent:"center",children:[Object(T.jsx)(y.a,{item:!0,children:Object(T.jsx)(F.a,{onClick:function(){S(!0)},variant:"outlined",color:"primary",children:"Create Post"})}),Object(T.jsx)(y.a,{item:!0,children:Object(T.jsx)(F.a,{onClick:function(){R.push("/admin/users")},variant:"outlined",color:"primary",children:"Manage Users"})})]}),Object(T.jsxs)(Ot,{handleClose:function(){S(!1)},open:j,children:[Object(T.jsx)(Je.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"post-title",label:"Post Title",name:"title",autoFocus:!0,onChange:U}),Object(T.jsx)("br",{}),Object(T.jsx)(Je.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"image-link",label:"Image Link",name:"image",autoFocus:!0,onChange:U}),Object(T.jsx)("br",{}),Object(T.jsx)(Je.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"post-description",label:"Post Description",name:"description",autoFocus:!0,multiline:!0,rows:4,onChange:U}),Object(T.jsx)("br",{}),Object(T.jsx)(F.a,{onClick:W,variant:"contained",color:"secondary",children:"ADD"})]})]})]})}),Object(T.jsx)(f.a,{className:q.cardGrid,maxWidth:"md",children:Object(T.jsx)(y.a,{container:!0,spacing:4,children:r?Object(T.jsx)(x.a,{}):n.listPosts.map((function(e){var t={image:e.image,alt:e.image};return Object(T.jsx)(y.a,{item:!0,xs:12,sm:6,md:4,children:Object(T.jsx)(M,{media:t,cardHeading:e.title,cardBody:e.description,children:Object(T.jsxs)(w.a,{children:[Object(T.jsxs)(g.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[z(e)?Object(T.jsx)(I.a,{color:"secondary",onClick:function(){return J(z(e)._id,e._id)}},z(e)._id):Object(T.jsx)(k.a,{color:"secondary",onClick:function(){return Q(e._id)}}),0!==e.likeList.length&&Object(T.jsx)("span",{children:e.likeList.length})]}),Object(T.jsxs)(g.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[Object(T.jsx)(C.a,{onClick:function(){return t=e._id,void R.push("/admin/post/".concat(t));var t}}),0!==e.commentList.length&&Object(T.jsx)("span",{children:e.commentList.length})]}),Object(T.jsx)(g.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:Object(T.jsx)(mt.a,{onClick:function(){return G(e._id)}})})]})})},e._id)}))})})]}),Object(T.jsx)(E,{message:N,setMessage:A})]})},wt=r(172),It=r(232),kt=r(253),Ct=r(244),St=r(235),_t=function(){var e=Y().isLoggedIn,t=Object(Ee.a)(Ae),r=Object(m.a)(t,2),n=r[0],a=r[1],s=a.data,c=a.loading,i=a.error;return{deleteUserMutationHandler:function(){var t=Object(b.a)(p.a.mark((function t(r,a){var s,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e()){t.next=2;break}return t.abrupt("return",{error:!0,data:{message:"Please Login to delete users"}});case 2:return t.prev=2,t.next=5,n({variables:Object(H.a)({},r),refetchQueries:[{query:_e}]});case 5:return s=t.sent,c=s.data,t.abrupt("return",{error:!1,data:c});case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",{error:!0,data:t.t0});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,r){return t.apply(this,arguments)}}(),data:s,isLoading:c,error:i}},Lt=function(){var e=Y().isLoggedIn,t=Object(Ee.a)(Me),r=Object(m.a)(t,2),n=r[0],a=r[1],s=a.data,c=a.loading,i=a.error;return{assignRoleMutationHandler:function(){var t=Object(b.a)(p.a.mark((function t(r,a){var s,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e()){t.next=2;break}return t.abrupt("return",{error:!0,data:{message:"Please Login to assign roles"}});case 2:return t.prev=2,t.next=5,n({variables:Object(H.a)({},r),refetchQueries:[{query:_e}]});case 5:return s=t.sent,c=s.data,t.abrupt("return",{error:!1,data:c});case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",{error:!0,data:t.t0});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,r){return t.apply(this,arguments)}}(),data:s,isLoading:c,error:i}},Dt=function(){var e=Y().authState,t=Object(h.a)(_e),r=t.data,a=t.loading,s=_t().deleteUserMutationHandler,c=Lt().assignRoleMutationHandler,o=Object(i.useState)(!1),d=Object(m.a)(o,2),u=d[0],l=d[1],j=Object(i.useState)({role:"",id:""}),O=Object(m.a)(j,2),f=O[0],v=O[1],w=Object(i.useState)({toShow:!1,variant:"success",messageText:""}),I=Object(m.a)(w,2),k=I[0],C=I[1],S=function(){var t=Object(b.a)(p.a.mark((function t(){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c({role:f.role,assignedBy:e.userId,assignedUser:f.id});case 2:r=t.sent,C({messageText:r.error?r.data.message:"role assigned",toShow:!0,variant:r.error?"error":"success"}),v({id:"",role:""}),l(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),_=function(){var e=Object(b.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({_id:t});case 2:r=e.sent,C({messageText:r.error?r.data.message:"user deleted",toShow:!0,variant:r.error?"error":"success"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsx)(ve,{children:Object(T.jsxs)(y.a,{container:!0,spacing:2,justifyContent:"center",children:[a?Object(T.jsx)(x.a,{}):Object(T.jsx)(y.a,{item:!0,xs:11,md:8,children:r.listUsers.map((function(e){return Object(T.jsxs)(g.a,{display:"flex",justifyContent:"space-around",alignItems:"center",children:[Object(T.jsx)(wt.a,{alignItems:"flex-start",children:Object(T.jsx)(jt.a,{primary:e.email,secondary:e.role})}),Object(T.jsx)(mt.a,{onClick:function(){return _(e._id)}}),Object(T.jsx)(St.a,{onClick:function(){var t;t=e._id,v(Object(H.a)(Object(H.a)({},f),{},{id:t})),l(!0)}}),Object(T.jsxs)(Ot,{open:u,handleClose:function(){return l(!1)},children:[Object(T.jsx)("h4",{children:"Select Roles"}),Object(T.jsxs)(It.a,{variant:"outlined",children:[Object(T.jsx)(kt.a,{htmlFor:"outlined-age-native-simple",children:"Roles"}),Object(T.jsxs)(Ct.a,{native:!0,value:f.role,onChange:function(e){v(Object(H.a)(Object(H.a)({},f),{},{role:e.target.value}))},label:"Roles",children:[Object(T.jsx)("option",{"aria-label":"None",value:""}),Object(T.jsx)("option",{value:n.ADMIN,children:n.ADMIN}),Object(T.jsx)("option",{value:n.MODERATOR,children:n.MODERATOR}),Object(T.jsx)("option",{value:n.AUTH_USER,children:n.AUTH_USER})]})]}),Object(T.jsx)("hr",{}),Object(T.jsx)(F.a,{variant:"contained",color:"primary",onClick:function(){return S()},children:"Authorize"})]})]},e._id)}))}),Object(T.jsx)(E,{message:k,setMessage:C})]})})},Tt=function(){var e=Y().isLoggedIn,t=Object(Ee.a)(Ne),r=Object(m.a)(t,2),n=r[0],a=r[1],s=a.data,c=a.loading,i=a.error;return{deleteCommentMutationHandler:function(){var t=Object(b.a)(p.a.mark((function t(r,a){var s,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e()){t.next=2;break}return t.abrupt("return",{error:!0,data:{message:"Please Login to delete comments"}});case 2:return t.prev=2,t.next=5,n({variables:Object(H.a)({},r),refetchQueries:[{query:Se,variables:{_id:a.postId}}]});case 5:return s=t.sent,c=s.data,t.abrupt("return",{error:!1,data:c});case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",{error:!0,data:t.t0});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,r){return t.apply(this,arguments)}}(),data:s,isLoading:c,error:i}},Pt=function(){var e=Y().authState,t=Object(u.h)().id,r=pt(),n=r.createCommentMutationHandler,a=r.isLoading,s=Tt().deleteCommentMutationHandler,c=Object(h.a)(Se,{variables:{_id:t}}),o=c.loading,d=c.data,l=Object(i.useState)(""),j=Object(m.a)(l,2),O=j[0],f=j[1],v=ye({messageText:"",toShow:!1,variant:"success"}),w=Object(m.a)(v,2),I=w[0],k=w[1],C=function(){var r=Object(b.a)(p.a.mark((function r(){var a;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n({text:O,creatorId:e.userId,postId:t},{postId:t});case 2:a=r.sent,k({messageText:a.error?a.data.message:"comment added",toShow:!0,variant:a.error?"error":"success"});case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(p.a.mark((function e(r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({_id:r},{postId:t});case 2:n=e.sent,k({messageText:n.error?n.data.message:"comment deleted",toShow:!0,variant:n.error?"error":"success"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)(ve,{children:[o?Object(T.jsx)(x.a,{}):Object(T.jsxs)(y.a,{container:!0,spacing:2,justifyContent:"center",children:[Object(T.jsx)(y.a,{item:!0,xs:11,children:Object(T.jsx)(M,{cardHeading:d.getPostById.title,cardBody:d.getPostById.description})}),Object(T.jsxs)(y.a,{item:!0,xs:11,children:[Object(T.jsx)(Je.a,{id:"outlined-full-width",label:"Add Comment",placeholder:"Add comment",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined",onChange:function(e){return f(e.target.value)}}),Object(T.jsx)(F.a,{onClick:C,variant:"contained",color:"secondary",children:"ADD"}),a&&Object(T.jsx)(x.a,{})]}),Object(T.jsxs)(y.a,{item:!0,xs:11,children:["COMMENTS",Object(T.jsx)("hr",{})]}),d.getPostById.commentList&&0!==d.getPostById.commentList.length&&Object(T.jsx)(y.a,{item:!0,xs:11,children:d.getPostById.commentList.map((function(e){return Object(T.jsxs)(g.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(T.jsx)(wt.a,{alignItems:"flex-start",style:{backgroundColor:"#b9f6ca",borderRadius:"5px",marginBottom:"5px"},children:Object(T.jsx)(jt.a,{primary:e.creator.username,secondary:e.text})},e._id),Object(T.jsx)(mt.a,{onClick:function(){return S(e._id)}})]},e._id)}))})]}),Object(T.jsx)(E,{message:I,setMessage:k})]})},Mt=Le,Ht=function(){var e=Y().authState,t=Object(h.a)(Ce),r=t.loading,n=t.data,a=ft().deletePostMutationHandler,s=qe().createLikeMutationHandler,c=Re().deleteLikeMutationHandler,i=ye({messageText:"",toShow:!1,variant:"success"}),o=Object(m.a)(i,2),d=o[0],l=o[1],j=Mt(),S=Object(u.g)(),_=function(){var e=Object(b.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({_id:t});case 2:r=e.sent,l({messageText:r.error?r.data.message:"post deleted",toShow:!0,variant:r.error?"error":"success"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var t=Object(b.a)(p.a.mark((function t(r){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s({postId:r,creatorId:e.userId},{postId:r});case 2:n=t.sent,l({messageText:n.error&&n.data.message,toShow:n.error&&!0,variant:"error"});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({_id:t},{postId:r});case 2:n=e.sent,l({messageText:n.error&&n.data.message,toShow:n.error&&!0,variant:"error"});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),P=function(t){return t.likeList&&t.likeList.find((function(r){return e.userId&&r.post._id===t._id&&r.creator._id===e.userId?r:null}))};return Object(T.jsxs)(ve,{children:[Object(T.jsx)(O.a,{}),Object(T.jsxs)("main",{children:[Object(T.jsx)("div",{className:j.heroContent,children:Object(T.jsxs)(f.a,{maxWidth:"sm",children:[Object(T.jsxs)(v.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0,children:[Object(T.jsxs)(g.a,{display:"flex",justifyContent:"center",alignItems:"center",children:[Object(T.jsx)("img",{src:me,alt:"site-icon",width:"100px"}),Object(T.jsx)("span",{children:"Photos Moderator"})]})," "]}),Object(T.jsxs)(v.a,{variant:"h5",align:"center",paragraph:!0,children:["Hello\ud83d\udc4b! Photos is sample test project that I worked upon to show how custom-directives can be implemented with"," ",Object(T.jsx)("a",{href:"https://www.npmjs.com/package/express-graphql",children:"express-graphql"})," ","and"," ",Object(T.jsx)("a",{href:"https://www.npmjs.com/package/graphql-directive",children:"graphql-directive"})]})]})}),Object(T.jsx)(f.a,{className:j.cardGrid,maxWidth:"md",children:Object(T.jsx)(y.a,{container:!0,spacing:4,children:r?Object(T.jsx)(x.a,{}):n.listPosts.map((function(e){var t={image:e.image,alt:e.image};return Object(T.jsx)(y.a,{item:!0,xs:12,sm:6,md:4,children:Object(T.jsx)(M,{media:t,cardHeading:e.title,cardBody:e.description,children:Object(T.jsxs)(w.a,{children:[Object(T.jsxs)(g.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[P(e)?Object(T.jsx)(I.a,{color:"secondary",onClick:function(){return D(P(e)._id,e._id)}},P(e)._id):Object(T.jsx)(k.a,{color:"secondary",onClick:function(){return L(e._id)}}),0!==e.likeList.length&&Object(T.jsx)("span",{children:e.likeList.length})]}),Object(T.jsxs)(g.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[Object(T.jsx)(C.a,{onClick:function(){return t=e._id,void S.push("/moderator/post/".concat(t));var t}}),0!==e.commentList.length&&Object(T.jsx)("span",{children:e.commentList.length})]}),Object(T.jsx)(g.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:Object(T.jsx)(mt.a,{onClick:function(){return _(e._id)}})})]})})},e._id)}))})})]}),Object(T.jsx)(E,{message:d,setMessage:l})]})},Bt=function(){var e=Y().authState,t=Object(u.h)().id,r=Object(h.a)(Se,{variables:{_id:t}}),n=r.loading,a=r.error,s=r.data,c=pt(),o=c.createCommentMutationHandler,d=c.isLoading,l=Tt().deleteCommentMutationHandler,j=Object(i.useState)(""),O=Object(m.a)(j,2),f=O[0],v=O[1],w=ye({messageText:"",toShow:!1,variant:"success"}),I=Object(m.a)(w,2),k=I[0],C=I[1];a&&C({messageText:a.message,toShow:!0,variant:"error"});var S=function(){var r=Object(b.a)(p.a.mark((function r(){var n;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o({text:f,creatorId:e.userId,postId:t},{postId:t});case 2:n=r.sent,C({messageText:n.error?n.data.message:"comment added",toShow:!0,variant:n.error?"error":"success"});case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),_=function(){var e=Object(b.a)(p.a.mark((function e(r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({_id:r},{postId:t});case 2:n=e.sent,C({messageText:n.error?n.data.message:"comment deleted",toShow:!0,variant:n.error?"error":"success"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)(ve,{children:[n?Object(T.jsx)(x.a,{}):Object(T.jsxs)(y.a,{container:!0,spacing:2,justifyContent:"center",children:[Object(T.jsx)(y.a,{item:!0,xs:11,children:Object(T.jsx)(M,{cardHeading:s.getPostById.title,cardBody:s.getPostById.description})}),Object(T.jsxs)(y.a,{item:!0,xs:11,children:[Object(T.jsx)(Je.a,{id:"outlined-full-width",label:"Add Comment",placeholder:"Add comment",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined",onChange:function(e){return v(e.target.value)}}),Object(T.jsx)(F.a,{onClick:S,variant:"contained",color:"secondary",children:"ADD"}),d&&Object(T.jsx)(x.a,{})]}),Object(T.jsxs)(y.a,{item:!0,xs:11,children:["COMMENTS",Object(T.jsx)("hr",{})]}),s.getPostById.commentList&&0!==s.getPostById.commentList.length&&Object(T.jsx)(y.a,{item:!0,xs:11,children:s.getPostById.commentList.map((function(e){return Object(T.jsxs)(g.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(T.jsx)(wt.a,{alignItems:"flex-start",style:{backgroundColor:"#b9f6ca",borderRadius:"5px",marginBottom:"5px"},children:Object(T.jsx)(jt.a,{primary:e.creator.username,secondary:e.text})},e._id),Object(T.jsx)(mt.a,{onClick:function(){return _(e._id)}})]},e._id)}))})]}),Object(T.jsx)(E,{message:k,setMessage:C})]})};r(168);Object(c.config)();var $t=function(){return Object(T.jsx)(l.a,{client:nt({}),children:Object(T.jsx)(d.a,{basename:"/custom-directives-with-express-graphql",children:Object(T.jsx)(V,{children:Object(T.jsxs)(u.d,{children:[Object(T.jsx)(be,{component:Bt,path:"/moderator/post/:id",role:n.MODERATOR}),Object(T.jsx)(be,{component:Ht,path:"/moderator",exact:!0,role:n.MODERATOR}),Object(T.jsx)(be,{component:Dt,path:"/admin/users",role:n.ADMIN}),Object(T.jsx)(be,{component:Pt,path:"/admin/post/:id",role:n.ADMIN}),Object(T.jsx)(be,{path:"/admin",exact:!0,component:yt,role:n.ADMIN}),Object(T.jsx)(u.b,{path:"/post/:id",component:bt}),Object(T.jsx)(u.b,{path:"/login",exact:!0,component:it}),Object(T.jsx)(u.b,{path:"/register",exact:!0,component:ut}),Object(T.jsx)(u.b,{path:"/",exact:!0,component:We}),Object(T.jsx)(u.b,{component:Ge})]})})})})};r(169);s.a.render(Object(T.jsx)($t,{}),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.8ca74fc8.chunk.js.map